<!doctype html>
<html
  lang="en"
  dir="ltr"
  class="scroll-smooth"
  data-default-appearance="dark"
  data-auto-appearance="false"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8">
  
    <meta http-equiv="content-language" content="en">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="theme-color">

  
  
    <title>Animating LEDs with Shift Register &middot; Fadlan Abduh</title>
    <meta name="title" content="Animating LEDs with Shift Register &middot; Fadlan Abduh">
  

  
  
    <meta name="description" content="Going low-level.">
  
  
  
  
  <link rel="canonical" href="http://localhost:1313/posts/avr/01-shift-register/">
  

  
  
    <meta name="author" content="Fadlan Abduh">
  
  

  
  <meta property="og:url" content="http://localhost:1313/posts/avr/01-shift-register/">
  <meta property="og:site_name" content="Fadlan Abduh">
  <meta property="og:title" content="Animating LEDs with Shift Register">
  <meta property="og:description" content="Going low-level.">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-12-28T05:15:34+07:00">
    <meta property="article:modified_time" content="2025-12-28T05:15:34+07:00">
      <meta property="og:see_also" content="http://localhost:1313/posts/avr/00-hello/">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Animating LEDs with Shift Register">
  <meta name="twitter:description" content="Going low-level.">

  
  
  
  
    
      
    
  
    
      
    
  
    
      
    
  
  
    
  

  
  
  
  
  
  

  

  
  
  
  
  
  
  
    
  
  
    
  
  
  <link
    type="text/css"
    rel="stylesheet"
    href="/css/main.bundle.min.28be18702a02b0b5ac6b7155d437b07f091a677af2b3c5730aae30a87587bfd0e278a9499515c271154afa012bc1aaf5625e415c6aeabfe292242a2bf55fc388.css"
    integrity="sha512-KL4YcCoCsLWsa3FV1DewfwkaZ3rys8VzCq4wqHWHv9DieKlJlRXCcRVK&#43;gErwar1Yl5BXGrqv&#43;KSJCor9V/DiA==">

  
  
  <script
    type="text/javascript"
    src="/js/appearance.min.6f41174b3a05b680820fe08cadbfa5fb7a7ca347b76a0955cdc68b9d8aca1ce24f0547e138cea33bcc7904d551a90afcb1cc7f2d9fe8557075d501419046c08c.js"
    integrity="sha512-b0EXSzoFtoCCD&#43;CMrb&#43;l&#43;3p8o0e3aglVzcaLnYrKHOJPBUfhOM6jO8x5BNVRqQr8scx/LZ/oVXB11QFBkEbAjA=="></script>
  
  
  
  
  
  
    
    <script src="/lib/zoom/zoom.min.umd.a527109b68c082a70f3697716dd72a9d5aa8b545cf800cecbbc7399f2ca6f6e0ce3e431f2062b48bbfa47c9ea42822714060bef309be073f49b9c0e30d318d7b.js" integrity="sha512-pScQm2jAgqcPNpdxbdcqnVqotUXPgAzsu8c5nyym9uDOPkMfIGK0i7&#43;kfJ6kKCJxQGC&#43;8wm&#43;Bz9JucDjDTGNew=="></script>
  

  
  
  
    
  
  
    
  
  
  
  
  
  
  
    
    <script
      defer
      type="text/javascript"
      id="script-bundle"
      src="/js/main.bundle.min.9df4fc14d50efcc9aa4cfc2b6f348e365f421f5ad491278f8f48c0360cf2f93f08882fda6da162d7ace8e5add57c2df4ac46bd3861306b1d4c452cd31f448d64.js"
      integrity="sha512-nfT8FNUO/MmqTPwrbzSONl9CH1rUkSePj0jANgzy&#43;T8IiC/abaFi16zo5a3VfC30rEa9OGEwax1MRSzTH0SNZA=="
      data-copy="Copy"
      data-copied="Copied"></script>
  

  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>


























  

  

  

  

  





  
  
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
  

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Posts",
    "name": "Animating LEDs with Shift Register",
    "headline": "Animating LEDs with Shift Register",
    
    
    "inLanguage": "en",
    "url" : "http://localhost:1313/posts/avr/01-shift-register/",
    "author" : {
      "@type": "Person",
      "name": "Fadlan Abduh"
    },
    "copyrightYear": "2025",
    "dateCreated": "2025-12-28T05:15:34\u002b07:00",
    "datePublished": "2025-12-28T05:15:34\u002b07:00",
    
    "dateModified": "2025-12-28T05:15:34\u002b07:00",
    
    
    
    "mainEntityOfPage": "true",
    "wordCount": "2858"
  }]
  </script>



  
  

  
  

  
  

  
  

  
  
</head>


















  
  
  <body class="flex flex-col h-screen m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32 text-lg bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
    <div id="the-top" class="absolute flex self-center">
      <a
        class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
        href="#main-content">
        <span class="font-bold text-primary-600 pe-2 dark:text-primary-400">&darr;</span>
        Skip to main content
      </a>
    </div>
    
    
      <div class="min-h-[148px]"></div>
<div class="fixed inset-x-0 z-100">
  <div
    id="menu-blur"
    class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom bg-neutral dark:bg-neutral-800"></div>
  <div class="relative m-auto leading-7 max-w-7xl px-6 sm:px-14 md:px-24 lg:px-32">
    













<div
  class="main-menu flex items-center justify-between py-6 md:justify-start gap-x-3 pt-[2px] pr-2 md:pr-4 pb-[3px] pl-0">
  
  

  <div class="flex flex-1 items-center justify-between">
    <nav class="flex space-x-3">
      
        <a href="/" class="text-base font-medium">
          Fadlan Abduh
        </a>
      
    </nav>
    
  <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">
    
      
        
  <a
  href="/posts/"
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  aria-label="Blog"
  title="Posts">
  
  
    <p class="text-base font-medium">
      Blog
    </p>
  
</a>



      
        
  <a
  href=""
  
  class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
  
  title="">
  
  
</a>



      
    

    

    

    
      <button
        id="search-button"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
      <div class=" flex items-center">
        <button
          id="appearance-switcher"
          aria-label="Dark mode switcher"
          type="button"
          class="text-base hover:text-primary-600 dark:hover:text-primary-400">
          <div class="flex items-center justify-center dark:hidden">
            <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
          </div>
          <div class="items-center justify-center hidden dark:flex">
            <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
          </div>
        </button>
      </div>
    
  </nav>

    
  <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">
    <span></span>

    

    

    
      <button
        id="search-button-mobile"
        aria-label="Search"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400"
        title="Search (/)">
        <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
      </button>
    

    
      <button
        id="appearance-switcher-mobile"
        aria-label="Dark mode switcher"
        type="button"
        class="text-base hover:text-primary-600 dark:hover:text-primary-400 me-1">
        <div class="flex items-center justify-center dark:hidden">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M32 256c0-123.8 100.3-224 223.8-224c11.36 0 29.7 1.668 40.9 3.746c9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3c9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480C132.1 480 32 379.6 32 256z"/></svg>
</span>
        </div>
        <div class="items-center justify-center hidden dark:flex">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 159.1c-53.02 0-95.1 42.98-95.1 95.1S202.1 351.1 256 351.1s95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347L446.1 255.1l63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7l-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89L164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6L12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256l-63.15 91.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7l19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109l109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69 0-127.1-57.31-127.1-127.1c0-70.69 57.31-127.1 127.1-127.1s127.1 57.3 127.1 127.1C383.1 326.7 326.7 383.1 256 383.1z"/></svg>
</span>
        </div>
      </button>
    
  </div>

  </div>
  
  <div class="-my-2 md:hidden">
    <div id="menu-button" class="block">
      
        <div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400">
          <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.33 14.33 64 32 64H416C433.7 64 448 78.33 448 96C448 113.7 433.7 128 416 128H32C14.33 128 0 113.7 0 96zM0 256C0 238.3 14.33 224 32 224H416C433.7 224 448 238.3 448 256C448 273.7 433.7 288 416 288H32C14.33 288 0 273.7 0 256zM416 448H32C14.33 448 0 433.7 0 416C0 398.3 14.33 384 32 384H416C433.7 384 448 398.3 448 416C448 433.7 433.7 448 416 448z"/></svg>
</span>
        </div>
        <div
          id="menu-wrapper"
          class="fixed inset-0 z-30 invisible w-screen h-screen m-0 overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50 pt-[5px]">
          <ul
            class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none text-end max-w-7xl">
            <li id="menu-close-button">
              <span
                class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400">
                <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
              </span>
            </li>

            
              
  <li class="mt-1">
  <a
    href="/posts/"
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    aria-label="Blog"
    title="Posts">
    
    
      <p class="text-bg font-bg">
        Blog
      </p>
    
  </a>
</li>



            
              
  <li class="mt-1">
  <a
    href=""
    
    class="flex items-center hover:text-primary-600 dark:hover:text-primary-400"
    
    title="">
    
    
  </a>
</li>



            

          </ul>
          
        </div>
      
    </div>
  </div>

</div>





  </div>
</div>


<script
  type="text/javascript"
  src="/js/background-blur.min.00a57c73ea12f2cab2980c3c3d649e89f6d82f190f74bbe2b67f2f5e39ab7d032ece47086400ca05396758aace13299da49aca43ea643d2625e62c506267a169.js"
  integrity="sha512-AKV8c&#43;oS8sqymAw8PWSeifbYLxkPdLvitn8vXjmrfQMuzkcIZADKBTlnWKrOEymdpJrKQ&#43;pkPSYl5ixQYmehaQ=="
  data-blur-id="menu-blur"></script>

    
    <div class="relative flex flex-col grow">
      <main id="main-content" class="grow">
        
  
  <article>
    
    

    
    <header id="single_header" class="mt-5 max-w-prose">
      
      <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
        Animating LEDs with Shift Register
      </h1>
      <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
        





  
  



  

  
  
  
    
  

  

  
    
  

  

  
    
  

  
    
  

  

  

  

  

  


  <div class="flex flex-row flex-wrap items-center">
    
    
      <time datetime="2025-12-28T05:15:34&#43;07:00">28 December 2025</time><span class="px-2 text-primary-500">&middot;</span><span>2858 words</span><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">14 mins</span>
    

    
    
  </div>

  

  
  

  
  



      </div>
      
        
  
  
  
  
  
  

  

  
    
    
<div class="flex author">
  
  <div class="place-self-center">
    
      <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
        Author
      </div>
      <div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
        Fadlan Abduh
      </div>
    
    
      <div class="text-sm text-neutral-700 dark:text-neutral-400">Web dev gone deviant, chasing hardware truth.</div>
    
    <div class="text-2xl sm:text-lg">
</div>
  </div>
</div>

  

  

  
    <div class="mb-5"></div>
  

      
    </header>

    
    <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
      
      
      
      
      


      <div class="min-w-0 min-h-0 max-w-fit">
        
  <details
    class="mt-2 mb-5 overflow-hidden rounded-lg ms-0 ps-5"
    >
    
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-primary-200 text-neutral-800 -ms-5 ps-5 dark:bg-primary-800 dark:text-neutral-100">
    AVR -
    This article is part of a series.
  </summary>
  
  
    
      <div
        class="py-1 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600">
        <a href="/posts/avr/00-hello/">
          Part 0:
          Hello, Bare Metal AVR.
        </a>
      </div>
    
  
    
      <div
        class="py-1 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600">
        Part 1:
        This Article
      </div>
    
  


  </details>


        <div class="article-content max-w-prose mb-20">
          
<h2 class="relative group">Table of Contents
    <div id="table-of-contents" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#table-of-contents" aria-label="Anchor">#</a>
    </span>
    
</h2>
<ol>
<li><a
  href="#intro">Intro</a></li>
<li><a
  href="#shift-register">Shift Register</a></li>
<li><a
  href="#ic-sn74hc595">IC SN74HC595</a><br>
a. <a
  href="#overview">↳Overview</a><br>
b. <a
  href="#pin-descriptions">↳Pin Descriptions</a><br>
c. <a
  href="#functional-characteristics">↳Functional Characteristics</a></li>
<li><a
  href="#interrupts">Interrupts</a><br>
a. <a
  href="#a-brief-description">↳A Brief Description</a><br>
b. <a
  href="#blocking-process">↳Blocking Process</a><br>
c. <a
  href="#interrupts-in-atmega328p">↳Interrupts in ATMega328P</a></li>
<li><a
  href="#putting-it-all-together">Putting it All Together</a><br>
a. <a
  href="#writing-bytes-to-the-shift-register">↳Writing Bytes to the Shift Register</a><br>
b. <a
  href="#the-animation">↳The Animation</a><br>
c. <a
  href="#interrupt-for-interface">↳Interrupt for Interface</a><br>
d. <a
  href="#result">↳Result</a></li>
<li><a
  href="#conclusion">Conclusion</a></li>
<li><a
  href="#nomenclature-of-the-7400-series-ic-opsional">↳Nomenclature of the 7400 series IC (trivia)</a></li>
<li><a
  href="#references-and-further-reading">References and Further Reading</a></li>
<li><a
  href="#foot-notes">Foot Notes</a></li>
</ol>

<h2 class="relative group">Overview
    <div id="overview" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#overview" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Bagaimana caranya menganimasikan 8 LED dengan mikrokontroler? Cara paling sederhana adalah menggunakan 8 pin GPIO dari port yang sama. Contoh, jika kita menggunakan Port B, maka kita perlu mengubah register DDRB sekali dan memanipulasi PORTB untuk setiap frame-nya. Selesai.</p>
<p>Tapi terdapat masalah lain, jumlah pin GPIO pada MCU sangatlah terbatas. Beberapa MCU bahkan hanya memiliki 6 GPIO. Atau, meskipun jumlah pin yang dimiliki melimpah, kita tidak tahu pada update versi selanjutnya akan membutuhkan berapa banyak pin.</p>
<p>Salah satu solusi yang dapat digunakan adalah IC Shift Register Serial In Parallel Out, yang akan kita gunakan adalah IC SN74HC595. Sementara IC tersebut menangani 8 LED, digunakan 3 tombol sebagai interface: previous, restart, dan next. Interrupt akan mendeteksi ketika salah satu tombol ditekan. Itulah yang akan kita bahas kali ini.</p>
<p>Sebenarnya, ATMega328P memiliki pin yang cukup untuk menangani 8 LED dengan port yang sama. <em>But, let&rsquo;s do it anyway</em>.</p>
<p><em>Catatan: Blog ini tidak ditujukan sebagai tutorial atau blog singkat, melainkan &rsquo;technical walkthrough&rsquo; tentang program yang saya buat. Itulah mengapa blog ini cukup panjang.</em></p>

<h2 class="relative group">Shift Register
    <div id="shift-register" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#shift-register" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Kata &ldquo;register&rdquo; pada shift register secara konsep sama saja seperti register yang ada pada MCU. Register is register. Yang membedakan adalah kata &ldquo;shift&rdquo; (geser). Jadi, shift register adalah salah satu jenis register yang bisa menggeser data di dalamnya dari bit 0 ke bit 1, bit 1 ke bit 2, dan seterusnya ketika diberi sinyal clock.</p>
<p>Di dalam MCU juga terdapat internal shift register, tapi kali ini kita hanya membahas tentang external shift register dalam bentuk Integrated Circuit (IC). Karena ini eksternal, satu-satunya cara untuk memanipulasi register adalah dengan mengirimkan sinyal elektrik HIGH dan LOW. Alih-alih melakukan assignment seperti <code>PORTB = 0x3F;</code> pada program MCU.</p>
<p>Terdapat dua jenis shift register: Serial In Parallel Out (SIPO), dan Parallel In Serial Out (PISO). Yang akan kita gunakan adalah SIPO karena kita ingin mengurangi penggunaan pin MCU.</p>
<p><em>Catatan: Mulai sekarang sampai blog ini selesai, SR berarti Shift Register. Perlu diingat bahwa terdapat makna lain dari SR.</em></p>

<h2 class="relative group">IC SN74HC595
    <div id="ic-sn74hc595" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#ic-sn74hc595" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Overview
    <div id="overview-1" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#overview-1" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p><figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="Shift Register Illustration"
    width="665"
    height="342"
    src="/posts/avr/01-shift-register/img/working-sr.gif"
    srcset="/posts/avr/01-shift-register/img/working-sr.gif 800w, /posts/avr/01-shift-register/img/working-sr.gif 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/working-sr.gif"><figcaption>Ilustrasi shift register, sumber lastminuteengineers.com</figcaption></figure>

74HC595 adalah Integrated Circuit yang berguna untuk mengubah input serial menjadi output paralel (SIPO) dengan kapasitas maksimal 8-bit. Di dalamnya, terdapat dua macam register:</p>
<ul>
<li>shift register berguna sebagai &ldquo;antrean&rdquo; data masuk,</li>
<li>storage register (disebut juga latch) berguna untuk menyimpan data dari shift register dan diteruskan ke pin output. Data shift register hanya akan disimpan jika pin RCLK (disebut juga latch) diberi perubahan sinyal dari LOW ke HIGH.</li>
</ul>

<h3 class="relative group">Pin Descriptions
    <div id="pin-descriptions" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#pin-descriptions" aria-label="Anchor">#</a>
    </span>
    
</h3>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="SN74HC595 DIP Pinout"
    width="1131"
    height="867"
    src="/posts/avr/01-shift-register/img/sn74hc595-pinout_hu_4a805ef8c86c7725.png"
    srcset="/posts/avr/01-shift-register/img/sn74hc595-pinout_hu_4a805ef8c86c7725.png 800w, /posts/avr/01-shift-register/img/sn74hc595-pinout.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/sn74hc595-pinout.png"><figcaption>Pinout SNx4HC595, diambil dari datasheet Texas Instruments (TI). Perlu dicatat bahwa garis di atas pin OE dan RCLK memiliki Acrive Low, pin tersebut akan aktif jika dihubungkan ke ground.</figcaption></figure>
<table>
  <thead>
      <tr>
          <th style="text-align: left">Pin Number</th>
          <th style="text-align: left">Pin Name</th>
          <th style="text-align: left">Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td style="text-align: left">15,1-7</td>
          <td style="text-align: left">Qa-Qh</td>
          <td style="text-align: left">Parallel Output, diambil dari storage register.</td>
      </tr>
      <tr>
          <td style="text-align: left">8</td>
          <td style="text-align: left">GND</td>
          <td style="text-align: left">Ground Pin.</td>
      </tr>
      <tr>
          <td style="text-align: left">9</td>
          <td style="text-align: left">Qh'</td>
          <td style="text-align: left">Serial Output untuk merangkai 2 shift register atau lebih (kita abaikan di blog ini).</td>
      </tr>
      <tr>
          <td style="text-align: left">10</td>
          <td style="text-align: left">SRCLR</td>
          <td style="text-align: left">Shift Register Clear, aktif ketika terhubung ground.</td>
      </tr>
      <tr>
          <td style="text-align: left">11</td>
          <td style="text-align: left">SRCLK</td>
          <td style="text-align: left">Shift Register Clock, akan menggeser data di dalam shift register jika pin ini diberi sinyal dari LOW ke HIGH (rising edge).</td>
      </tr>
      <tr>
          <td style="text-align: left">12</td>
          <td style="text-align: left">RCLK</td>
          <td style="text-align: left">Register Clock, saat diberi rising edge data shift register akan disalin ke storage register, sehingga mengubah output.</td>
      </tr>
      <tr>
          <td style="text-align: left">13</td>
          <td style="text-align: left">OE</td>
          <td style="text-align: left">Output Enable, aktif ketika terhubung ke ground</td>
      </tr>
      <tr>
          <td style="text-align: left">14</td>
          <td style="text-align: left">SER</td>
          <td style="text-align: left">Serial data, jalur masuk data serial.</td>
      </tr>
      <tr>
          <td style="text-align: left">16</td>
          <td style="text-align: left">VCC</td>
          <td style="text-align: left">Suplai tegangan dari -0.5V sampai dengan 7V.</td>
      </tr>
  </tbody>
</table>

<h3 class="relative group">Functional Characteristics
    <div id="functional-characteristics" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#functional-characteristics" aria-label="Anchor">#</a>
    </span>
    
</h3>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="SN74HC595 Function Table"
    width="1726"
    height="764"
    src="/posts/avr/01-shift-register/img/sn74hc595-function_hu_750f89e0d8511fcd.png"
    srcset="/posts/avr/01-shift-register/img/sn74hc595-function_hu_750f89e0d8511fcd.png 800w, /posts/avr/01-shift-register/img/sn74hc595-function_hu_42fa6dc9131c00b0.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/sn74hc595-function.png"><figcaption>Tabel mode fungsi SNx4HC595, diambil dari datasheet TI.</figcaption></figure>
<p>Untuk memahami tabel di atas, berikut beberapa penjelasan untuk masing-masing jenis input:</p>
<ul>
<li>X: Don&rsquo;t care, tidak peduli input yang diberikan,</li>
<li>H: HIGH,</li>
<li>L: Low,</li>
<li>↑: Rising edge, ketika sinyal berubah dari LOW ke HIGH.</li>
</ul>
<p>Pada tabel fungsi, perubahan data dipicu oleh sinyal clock. Yang diperhatikan bukan sinyal HIGH atau LOW, tetapi transisi dari LOW ke HIGH (rising edge).</p>
<p>Berikut adalah penjelasan masing-masing mode:</p>
<ul>
<li>Fungsi 1 dan 2, untuk mengaktifkan pin output (Qa-Qh), pin OE harus disambungkan ke ground.</li>
<li>Fungsi 3, kita perlu menghubungkan pin SRCLR ke VCC agar SR tidak di-clear.</li>
<li>Fungsi 4, ketika SER bernilai LOW, SRCLR HIGH, dan memberi SRCLK sinyal clock: SR akan bergeser dan bit pertama bernilai 0.</li>
<li>Fungsi 5, Sama seperti sebelumnya, namun SER bernilai HIGH sehingga SR bergeser dan bit pertama bernilai 1.</li>
<li>Fungsi 6, ketika RCLK diberi sinyal clock (rising edge), data di dalam SR akan disalin ke storage register.</li>
</ul>
<p>Jadi, koneksi ke MCU yang perlu ditentukan adalah untuk pin SER, SRCLK, dan RCLK. Sedangkan untuk pin output, masing-masing pin dihubungkan ke katoda LED. Untuk pin lain, OE dihubungkan ke ground, dan SRCLR dihubungkan ke VCC.</p>

<h2 class="relative group">Interrupts
    <div id="interrupts" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#interrupts" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">A Brief Description
    <div id="a-brief-description" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#a-brief-description" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Interrupt adalah salah satu fungs dasar pada mikrokontroler yang berguna untuk menginterupsi program utama untuk melakukan proses lain yang lebih penting. Secara teknis, interrupt adalah sinyal yang menginformasikan CPU agar menghentikan apapun yang sedang dilakukan untuk sementara waktu. Setelah itu, Interrupt Service Routine (ISR) akan dijalankan. ISR umumnya ditulis dalam bentuk routine/fungsi. Kemudian, CPU kembali melanjutkan proses yang sebelumnya diinterupsi.</p>

<h3 class="relative group">Blocking Process
    <div id="blocking-process" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#blocking-process" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Perlu diingat bahwa sebuah CPU hanya bisa melakukan satu tugas  dalam satu waktu. Sementara itu, proses seperti animasi LED adalah proses yang memakan waktu, sebagian besar waktunya digunakan untuk menunggu beberapa ratus ms agar kita dapat melihat animasinya. Inilah yang disebut blocking process.</p>
<p>Misalkan kita menambahkan tombol &lsquo;previous&rsquo;, &rsquo;next&rsquo;, dan &lsquo;restart&rsquo; yang berguna untuk mengontrol animasi mana yang diputar. Tanpa interrupt, jika salah satu tombol ditekan maka tombol itu diabakan selama animasi sedang berjalan.</p>
<p>Dengan interrupt, kita bisa menginterupsi di tengah-tengah proses animasi. Kemudian di dalam ISR, ditentukan animasi mana yang harus diputar selanjutnya. Setelah itu, ISR kembali ke proses yang diinterupsi. Bedanya, kali ini fungsi tersebut dihentikan paksa sehingga iterasi main loop juga akan dihentikan paksa.</p>

<h3 class="relative group">Interrupts in ATMega328P
    <div id="interrupts-in-atmega328p" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#interrupts-in-atmega328p" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Pada ATMega328P terdapat beberapa macam interrupt, masing-masing memiliki alamat ISR-nya sendiri.
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="Interrupt Vector Table of the ATMega328P"
    width="981"
    height="858"
    src="/posts/avr/01-shift-register/img/atmega328p-intvect_hu_a5da77b80d055dda.png"
    srcset="/posts/avr/01-shift-register/img/atmega328p-intvect_hu_a5da77b80d055dda.png 800w, /posts/avr/01-shift-register/img/atmega328p-intvect.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/atmega328p-intvect.png"><figcaption>Macam sumber interrupt, RESET adalah prioritas tertinggi. Diambil dari datasheet ATMega328P.</figcaption></figure>

<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="ATMega328P DIP-28 pinout and its corresponding PCINT Vector"
    width="816"
    height="678"
    src="/posts/avr/01-shift-register/img/atmega328p_pin_pcintvect_hu_acbd62bf3ee26f6e.png"
    srcset="/posts/avr/01-shift-register/img/atmega328p_pin_pcintvect_hu_acbd62bf3ee26f6e.png 800w, /posts/avr/01-shift-register/img/atmega328p_pin_pcintvect.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/atmega328p_pin_pcintvect.png"><figcaption>Pinout ATMega328P DIP-28 dan vector PCINT masing-masing GPIO</figcaption></figure>

Sebagai contoh, ketika tombol dengan konfigurasi pull-up resistor ditekan, kondisi pin terkait akan berubah. Maka, untuk menerapkan interrupt, digunakan jenis Pin Change Interrupt (PCINT). Terdapat 3 PCINT (PCINT0-PCINT2), PCINT0 serta PCINT 2 masing-masing menangani 8 pin, dan PCINT1 menangani 7 pin.</p>
<p>Untuk menggunakan fitur interrupt, sertakan library <code>&lt;avr/interrupt.h&gt;</code>. Secara default interrupt tidak aktif, untuk mengaktifkan interrupt global, pangggil fungsi <code>sei()</code>. Selanjutnya, untuk mengaktifkan interrupt vector spesifik, register interrupt terkait perlu dimanipulasi.</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="EIMSK Register"
    width="1094"
    height="213"
    src="/posts/avr/01-shift-register/img/eimsk_hu_d93d096502b70681.png"
    srcset="/posts/avr/01-shift-register/img/eimsk_hu_d93d096502b70681.png 800w, /posts/avr/01-shift-register/img/eimsk.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/eimsk.png"></figure>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="n">EIMSK</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">INT1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="nf">sei</span><span class="p">();</span>
</span></span></code></pre></div><p>Ekspresi di atas akan memodifikasi EIMSK (External Interrupt Mask Register), mengubah 0 menjadi 1 pada bit INT1. Sehingga interrupt vector INT1 menjadi aktif. Pemanggilan fungsi <code>sei()</code> akan mengaktifkan interrupt secara global.</p>
<p>Ketika terdapat sinyal interrupt INT1 diciptakan, MCU akan segera menjalankan ISR yang sudah didefinisikan:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="nf">ISR</span> <span class="p">(</span><span class="n">INT1_vect</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// isr tasks
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></div><p>ISR dapat diinterupsi oleh interrupt vector yang memiliki prioritas lebih tinggi. Contoh, INT1 dapat diinterupsi oleh INT0 dan RESET.</p>
<p>Proses di dalam ISR sebaiknya dibuat seringkas mungkin. Salah satu cara untuk mempersingkatnya adalah menggunakan variable sebagai flag. Ketika sinyal interrupt diberikan, ISR mengisi flag dengan nilai <code>true</code>. Flag tersebut akan dievaluasi menggunakan control-flow sebelum mengeksekusi suatu proses.</p>

<h2 class="relative group">Putting it All Together
    <div id="putting-it-all-together" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#putting-it-all-together" aria-label="Anchor">#</a>
    </span>
    
</h2>

<h3 class="relative group">Writing Bytes to the Shift Register
    <div id="writing-bytes-to-the-shift-register" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#writing-bytes-to-the-shift-register" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Sebuah LED dapat direpresentasikan sebagai satu bit, delapan LED direpresentasikan menjadi delapan bit atau satu byte. Delapan LED tersebut selanjutnya dihubungkan ke output parallel IC shift register, SN74HC595. Sekarang, kita perlu mencari cara untuk mengirimkan data secara serial ke dalam IC tersebut.</p>
<p>Dengan mengabaikan pin-pin output dan pin lain yang terhubung ke ground atau VCC, berikut adalah pin yang tersisa dan perlu dihubungkan ke ATMega328P:</p>
<ol>
<li>SRCLK (11) ke PD0 (2),</li>
<li>RCLK (12) ke PD1 (3), dan</li>
<li>SER (14) ke PD2 (4).</li>
</ol>
<p>Pin-pin di atas digunakan dalam fungsi-fungsi primer yang melakukan: bit shifting, trigger SR clock, latch SR ke output.</p>
<p><em>*Catatan: Nomor pin SN74HC595 mengacu package DIP-16, dan ATMega328P DIP-28</em></p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// shiftreg.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#define SER PD0
</span></span></span><span class="line"><span class="cl"><span class="cp">#define R_CLK PD1
</span></span></span><span class="line"><span class="cl"><span class="cp">#define SR_CLK PD2
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">tick</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">PORTD</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">SR_CLK</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nf">_delay_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">PORTD</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">SR_CLK</span><span class="p">));</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Ketika routine <code>tick()</code> dieksekusi, data shift register akan digeser dengan nilai bit ke-0 mengikuti nilai <code>SER</code> atau <code>PD0</code> pada saat fungsi dieksekusi. Hal ini sesuai dengan karakteristik SR pada datasheet yang <a
  href="#functional-characteristics">sudah kita bahas</a>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// shiftreg.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">shift_bit</span><span class="p">(</span><span class="kt">bool</span> <span class="n">bit</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">bit</span><span class="p">)</span>    <span class="n">PORTD</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">SER</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">else</span>        <span class="n">PORTD</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">SER</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nf">tick</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Fungsi <code>shift_bit(bool bit)</code> menerima boolean sebagai parameter. Boolean tersebut dijadikan sebagai nilai <code>PD0</code>. Setelah nilai <code>PD0</code> diubah, fungsi <code>tick()</code> dipanggil sehingga bit ke-0 pada SR ditentukan oleh parameter <code>bit</code>.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// shiftreg.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">bool</span> <span class="nf">latch</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">PORTD</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">R_CLK</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nf">_delay_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">PORTD</span> <span class="o">&amp;=</span> <span class="p">(</span><span class="o">~</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">R_CLK</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">restart_requested</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">restart_requested</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Fungsi <code>latch()</code> akan menyalakan <code>R_CLK</code> atau <code>PD1</code> selama 1ms. Sesuai datasheet, high pada <code>RCLK</code> akan menyalin data pada SR ke storage register yang menyimpan nilai output.</p>
<p>Selanjutnya, <code>restart_requested</code> yang merupakan variable flag akan diperiksa. Jika bernilai <code>true</code>, flag tersebut akan dikembalikan ke nilai defaultnya. Setelah itu menghentikan eksekusi fungsi <code>latch()</code> dengan <code>return false;</code>.</p>
<p>Proses serupa terjadi secara bertumpuk/bersarang, fungsi yang memanggil <code>latch()</code> dan mendapatkan nilai <code>false</code> akan mengakhiri dirinya dengan mengembalikan nilai <code>false</code>. Dan seterusnya.</p>
<p>Sehingga ketika sinyal interrupt diberikan, semua proses secara instan akan terhenti dan memulai ulang <em>main-loop</em> untuk memulai animasi sebelumnya, selanjutnya, atau memulai ulang animasi saat ini.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// shiftreg.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">bool</span> <span class="nf">sr_write</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">shift_bit</span><span class="p">(</span><span class="n">data</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nf">latch</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Fungsi <code>sr_write(uint8_t data)</code> menerima parameter <code>data</code> yang berukuran 8-bit. Fungsi tersebut memasukkan data bit-demi-bit ke dalam SR dimulai dari <em>Most Significant Bit</em> (MSB First).</p>
<p>Di dalam setiap iterasi for, bit paling kiri (<code>data &amp; 0x80</code>) dimasukkan ke dalam SR. Selanjutnya, variabel <code>data</code> akan digeser 1 posisi ke kiri.</p>
<p>Setelah semua bit dimasukkan ke dalam SR, fungsi <code>latch()</code> dipanggil.</p>

<h3 class="relative group">The Animation
    <div id="the-animation" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#the-animation" aria-label="Anchor">#</a>
    </span>
    
</h3>
<p>Tiga fungsi yang telah dibuat, pada akhirnya digunakan untuk menyala-matikan 8 LED yang terhubung ke IC SR.</p>
<p>Untuk menampilkan animasi, kita perlu memanipulasi SR untuk menampilkan frame selama beberapa ms, kemudian menampilkan frame selanjutnya. Satu frame direpresentasikan oleh <code>uint8_t</code>, masing-masing bitnya menentukan nyala-mati satu buah LED.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// anim.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;util/delay.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;anim.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">bool</span> <span class="nf">draw_pattern</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">pattern</span><span class="p">,</span> <span class="kt">int</span> <span class="n">delay_ms</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nf">sr_write</span><span class="p">(</span><span class="n">pattern</span><span class="p">))</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">delay_ms</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">_delay_ms</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Fungsi <code>draw_pattern(uint8_t pattern, int delay_ms)</code> menampilkan <code>pattern</code> setidaknya selama <code>delay_ms</code>.</p>
<p>Perlu diingat bahwa fungsi <code>_delay_ms(int)</code> hanya menerima bilangan konstan. Untuk mengakalinya, digunakan <code>for</code> loop dengan iterasi sebanyak <code>delay_ms</code>, di mana setiap iterasinya melakukan delay selama 1ms.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// anim.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">binary_counter</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">256</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nf">draw_pattern</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">30</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Fungsi <code>binary_conter()</code> akan melakukan iterasi dari 0-255, nilai biner dari pencacah <code>i</code> kemudian ditampilkan selama 30ms.</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="Anim Eval Binary Counter"
    width="320"
    height="106"
    src="/posts/avr/01-shift-register/img/anim-binary_counter.gif"
    srcset="/posts/avr/01-shift-register/img/anim-binary_counter.gif 800w, /posts/avr/01-shift-register/img/anim-binary_counter.gif 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/anim-binary_counter.gif"><figcaption>Emulasi shift register untuk animasi binary_counter() melalui CLI.</figcaption></figure>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// anim.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">bounce_left_right</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nf">draw_pattern</span><span class="p">((</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">i</span><span class="p">),</span> <span class="mi">80</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">7</span><span class="p">;</span> <span class="n">i</span><span class="o">&gt;=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span> 
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nf">draw_pattern</span><span class="p">((</span><span class="mi">1</span><span class="o">&lt;&lt;</span><span class="n">i</span><span class="p">),</span> <span class="mi">80</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Selain menggunakan nilai biner dari suatu bilangan, operasi bitwise juga dapat digunakan untuk melakukan animasi. Fungsi <code>bounce_left_right()</code> menampilkan &ldquo;bola&rdquo; yang memantul dari kanan ke kiri dan sebaliknya.</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="Anim Eval Bounce Left Right"
    width="320"
    height="59"
    src="/posts/avr/01-shift-register/img/anim-bounce.gif"
    srcset="/posts/avr/01-shift-register/img/anim-bounce.gif 800w, /posts/avr/01-shift-register/img/anim-bounce.gif 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/anim-bounce.gif"><figcaption>Emulasi shift register untuk animasi bounce_left_right() melalui CLI.</figcaption></figure>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// anim.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kt">void</span> <span class="nf">left_sign</span><span class="p">(</span><span class="kt">int</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">i</span><span class="o">&lt;</span><span class="n">len</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nf">shift_bit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nf">shift_bit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nf">latch</span><span class="p">())</span> <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nf">_delay_ms</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>Routine <code>left_sign(int len)</code>, alih-alih memanggil fungsi seperti <code>sr_write</code> atau <code>draw_pattern</code>, ia menggunakan fungsi yang lebih dasar. <code>shift_bit</code> dan <code>latch</code>.</p>
<p>Routine di atas akan melakukan bit shifting bernilai 1 sebanyak <code>len</code> kali, dan 0 sebanyak <code>8-len</code> kali. Animasi yang dihasilkan adalah LED sejumlah <code>len</code> bergeser ke kiri seperti lampu sign kendaraan.</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="Anim Eval Bounce Left Right"
    width="320"
    height="59"
    src="/posts/avr/01-shift-register/img/anim-left.gif"
    srcset="/posts/avr/01-shift-register/img/anim-left.gif 800w, /posts/avr/01-shift-register/img/anim-left.gif 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/anim-left.gif"><figcaption>Emulasi shift register untuk animasi left_sign(int len) melalui CLI.</figcaption></figure>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// anim.h
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;stdint.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="kt">bool</span> <span class="nf">draw_pattern</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">pattern</span><span class="p">,</span> <span class="kt">int</span> <span class="n">delay</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">hello_world</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">binary_counter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">stack_to_end</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">bounce_left_right</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">left_sign</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">loading_bar</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">random_spark</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">waterdrop</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">heartbeat</span><span class="p">();</span>
</span></span></code></pre></div><p>File header di atas mendefinisikan fungsi-fungsi animasi. File tersebut akan disertakan pada <code>anim.c</code> dan <code>shiftreg.c</code>. Program lengkap dapat ditemukan di <a
  href="https://github.com/vfadlan/avr-exp/05-shiftreg/"
    target="_blank"
  >repo github berikut</a>.</p>

<h3 class="relative group">Interrupt for Interface
    <div id="interrupt-for-interface" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#interrupt-for-interface" aria-label="Anchor">#</a>
    </span>
    
</h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="c1">// shiftreg.c
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="cp">#include</span> <span class="cpf">&lt;avr/io.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;avr/interrupt.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;util/delay.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdbool.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdint.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define F_CPU 16000000UL
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="cp">#define SER PD0
</span></span></span><span class="line"><span class="cl"><span class="cp">#define R_CLK PD1
</span></span></span><span class="line"><span class="cl"><span class="cp">#define SR_CLK PD2
</span></span></span><span class="line"><span class="cl"><span class="cp">#define ANIM_NUM 9
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="kt">bool</span> <span class="nf">sr_write</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">data</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">shift_bit</span><span class="p">(</span><span class="kt">bool</span> <span class="n">bit</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">tick</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="kt">bool</span> <span class="nf">latch</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="cp">#include</span> <span class="cpf">&lt;anim.h&gt;</span><span class="cp">
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>
</span></span><span class="line"><span class="cl"><span class="k">volatile</span> <span class="kt">bool</span> <span class="n">restart_requested</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">volatile</span> <span class="kt">int</span> <span class="n">mode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="n">DDRD</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">SER</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">R_CLK</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">SR_CLK</span><span class="p">);</span> <span class="c1">// three output pins
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">PORTD</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PD5</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PD6</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PD7</span><span class="p">);</span>  <span class="c1">// three pull-up button interface
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">PCICR</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PCIE2</span><span class="p">);</span> <span class="c1">// enable PCINT2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="n">PCMSK2</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PCINT21</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PCINT22</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PCINT23</span><span class="p">);</span> <span class="c1">// enable PCINT2 for three pins
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="n">ADCSRA</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">ADEN</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">ADMUX</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="n">ADCSRA</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">ADSC</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">while</span><span class="p">(</span><span class="n">ADCSRA</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">ADSC</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">  <span class="nf">srand</span><span class="p">(</span><span class="n">ADC</span><span class="p">);</span> <span class="c1">// seed PRNG with ADC noise
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  
</span></span><span class="line"><span class="cl">  <span class="nf">sei</span><span class="p">();</span> <span class="c1">// enable global interrupt
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">  <span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">switch</span> <span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">hello_world</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">binary_counter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">bounce_left_right</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="mi">3</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">left_sign</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="mi">4</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">stack_to_end</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="mi">5</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">loading_bar</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="mi">6</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">random_spark</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="mi">7</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">waterdrop</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">case</span> <span class="mi">8</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">heartbeat</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="k">default</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">        <span class="nf">hello_world</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>File <code>shiftreg.c</code> adalah file utama program ini. Terdapat variable global volatile <code>restart_requested</code> sebagai flag interrupt, dan <code>mode</code> menentukan animasi mana yang perlu diputar.</p>
<p>Variabel <code>mode</code> bertipe data integer dengan nilai maksimal adalah <code>ANIM_NUM - 1</code> yang menyatakan banyaknya animasi yang tersedia.</p>
<p>Untuk mengubah animasi yang diputar, digunakan tiga tombol interface: previous, restart, next. Karena animasi merupakan proses blocking, digunakan interruptuntuk mendeteksi aksi pada tombol.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="n">PORTD</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PD5</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PD6</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PD7</span><span class="p">);</span>  <span class="c1">// three pull-up button interface
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">PCICR</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PCIE2</span><span class="p">);</span> <span class="c1">// enable PCINT2
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">PCMSK2</span> <span class="o">|=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PCINT21</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PCINT22</span><span class="p">)</span> <span class="o">|</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">PCINT23</span><span class="p">);</span> <span class="c1">// enable PCINT2 for three pins
</span></span></span></code></pre></div><p>Pada baris pertama, sinyal <code>PD5</code>, <code>PD6</code>, dan <code>PD7</code> diatur menjadi HIGH. Masing-masing pin tersebut dihubungkan ke Vcc. Ketika tombol ditekan, pin akan dialirkan ke ground sehingga nilai pin terkait berubah menjadi LOW. Ini disebut pull-up button.</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="Pull Up Button Configuration"
    width="400"
    height="293"
    src="/posts/avr/01-shift-register/img/pull-up-btn.jpg"
    srcset="/posts/avr/01-shift-register/img/pull-up-btn.jpg 800w, /posts/avr/01-shift-register/img/pull-up-btn.jpg 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/pull-up-btn.jpg"><figcaption>Tombol pull-up. Sumber: learn.sparkfun.com</figcaption></figure>
<p>Pada baris kedua Pin Change Interrupt kedua diaktifkan. Baris selanjutnya, <code>PCMSK2</code> (Pin Change Mask 2) dimanipulasi sehingga PCINT21 (PD5), PCINT22, (PD6), PCINT23 (PD7) dapat mengirimkan sinyal interrupt ketika terjadi perubahan sinyal.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-c" data-lang="c"><span class="line"><span class="cl"><span class="nf">ISR</span> <span class="p">(</span><span class="n">PCINT2_vect</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nf">_delay_ms</span><span class="p">(</span><span class="mi">25</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="n">restart_requested</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">((</span><span class="o">~</span><span class="p">(</span><span class="n">PIND</span> <span class="o">&gt;&gt;</span> <span class="n">PD5</span><span class="p">))</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">mode</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">mode</span><span class="o">--</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">mode</span> <span class="o">=</span> <span class="n">ANIM_NUM</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">((</span><span class="o">~</span><span class="p">(</span><span class="n">PIND</span> <span class="o">&gt;&gt;</span> <span class="n">PD7</span><span class="p">))</span> <span class="o">&amp;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">mode</span><span class="o">==</span><span class="p">(</span><span class="n">ANIM_NUM</span><span class="o">-</span><span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">mode</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">mode</span><span class="o">++</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>ISR di atas menangani tiga tombol interface. Saat ISR pertama kali dijalankan, MCU perlu menunggu 25ms untuk mengabaikan bouncing signal.
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="Bouncing Signal"
    width="532"
    height="314"
    src="/posts/avr/01-shift-register/img/0059-Switch_Debouncing_Figure_1.webp"
    srcset="/posts/avr/01-shift-register/img/0059-Switch_Debouncing_Figure_1.webp 800w, /posts/avr/01-shift-register/img/0059-Switch_Debouncing_Figure_1.webp 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/0059-Switch_Debouncing_Figure_1.webp"><figcaption>Sinyal oscilloscope pull-up button ketika tombol ditekan. Sumber: circuitcellar.com</figcaption></figure>

Ketika tombol mekanik ditekan, kontak yang dihasilkan tidak langsung sempurna. Alih-alih, terjadi fluktuasi seperti gambar di atas. Fluktuasi di atas disebut bouncing signal.</p>
<p>Terdapat beberapa teknik untuk <em>debouncing</em> (mengurangi sinyal fluktuasi). Dapat menggunakan solusi hardware maupun software. Solusi sederhana dengan software adalah menunggu selama beberapa ms sampai sinyal tersebut stabil, seperti yang dilakukan <code>_delay_ms(25)</code>*.</p>
<p>Setelah debouncing, <code>restart_requested</code> diubah menjadi <code>true</code> sehingga semua fungsi <code>latch()</code> dan yang memanggilnya akan terhenti begitu ISR selesai dijalankan.</p>
<p>Selanjutnya, blok control-flow mengevaluasi jika tombol yang ditekan terhubung dengan <code>PD5</code> (tombol previous). Jika benar,  nilai mode akan dikurangi 1, atau kembali ke nilai <code>ANIM_NUM-1</code> sehingga <code>mode</code> tidak akan bernilai negatif.</p>
<p>Jika salah, else if akan memeriksa jika tombol yang ditekan terhubung dengan <code>PD7</code> (tombol next). Jika benar, nilai mode akan diubah ditambah 1, atau kembali ke 0 sehingga <code>mode</code> akan selalu lebih kecil dari <code>ANIM_NUM</code>.</p>
<p><em>*Catatan: penggunaan delay di dalam ISR sangat tidak direkomendasikan karena merupakan proses blocking. Sebaiknya gunakan timer interrupt. Namun kali ini kita gunakan delay, penggunaan timer akan dibahas di blog selanjutnya.</em></p>

<h3 class="relative group">Result
    <div id="result" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#result" aria-label="Anchor">#</a>
    </span>
    
</h3>
<pre tabindex="0"><code>youtube video here
</code></pre>
<h2 class="relative group">Conclusion
    <div id="conclusion" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#conclusion" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>Sekedar kilas balik, kita sudah membahas tentang shift register, karakteristik ic sn74hc595, interrupts, dan program c.</p>
<figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="Schematic"
    width="1382"
    height="1174"
    src="/posts/avr/01-shift-register/img/schematic_hu_2683ef20ab2d1c05.png"
    srcset="/posts/avr/01-shift-register/img/schematic_hu_2683ef20ab2d1c05.png 800w, /posts/avr/01-shift-register/img/schematic_hu_45ec5d8d39111b90.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/schematic.png"><figcaption>Overall Schematic</figcaption></figure>
<p>Gambar di atas adalah diagram rangkaian secara keseluruhan. Kode program tersedia di repo <a
  href="https://github.com/vfadlan/avr-exp/05-shiftreg/"
    target="_blank"
  >repo github</a>.</p>
<p>Pada technical blog selanjutnya, kita akan mencoba menampilkan sesuatu ke 7-segment display dan 8x8 matrix sekaligus menggunakan 2 buah ic driver yang disusun berantai, max7219.</p>

<h2 class="relative group">Nomenclature of the 7400 series IC (trivia)
    <div id="nomenclature-of-the-7400-series-ic-trivia" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#nomenclature-of-the-7400-series-ic-trivia" aria-label="Anchor">#</a>
    </span>
    
</h2>
<p>IC 74HC595 memiliki makna dalam penamaannya. Untuk deskripsi lebih detail Anda dapat meninjau laman Wikipedia berikut: <a
  href="https://en.wikipedia.org/wiki/7400-series_integrated_circuits"
    target="_blank"
  >7400-series Integrated Circuits</a>. Berikut adalah ringkasannya:</p>
<ul>
<li>Kode 74 di depan merepresentasikan temperatur operasinya: <figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="TI TTL Prefix"
    width="670"
    height="282"
    src="/posts/avr/01-shift-register/img/74-prefix-nomen.png"
    srcset="/posts/avr/01-shift-register/img/74-prefix-nomen.png 800w, /posts/avr/01-shift-register/img/74-prefix-nomen.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/74-prefix-nomen.png"></figure>
</li>
<li>HC adalah singkatan dari Highspeed CMOS, ini adalah kode family line. Terdapat banyak family line lain seperti L (Low Power), C (CMOS), F (Fast), dan masih banyak lagi. Untuk lebih detailnya silakan baca <a
  href="https://en.wikipedia.org/wiki/7400-series_integrated_circuits#Families"
    target="_blank"
  >di sini</a>.</li>
<li>Sedangkan 595 adalah kode subfamily. Banyak subfamily lain seperti 165 (SIPO SR), 00 (Quad AND Gate), 114 (Dual J-K Flip-Flop), dsb.</li>
</ul>
<p>IC 7400 series ini didesain oleh perusahaan asal Amerika, Texas Instruments. Namun, perusahaan lain memiliki lisensi untuk memproduksi seri ini. Sehingga, diberikan prefiks untuk memberi keterangan perusahaan yang memproduksinya: <figure><img
    class="my-0 rounded-md"
    loading="lazy"
    decoding="async"
    fetchpriority="auto"
    alt="TTL Manufacturer Prefix"
    width="601"
    height="280"
    src="/posts/avr/01-shift-register/img/74-manprefix-nomen.png"
    srcset="/posts/avr/01-shift-register/img/74-manprefix-nomen.png 800w, /posts/avr/01-shift-register/img/74-manprefix-nomen.png 1280w"
    sizes="(min-width: 768px) 50vw, 65vw"
    data-zoom-src="/posts/avr/01-shift-register/img/74-manprefix-nomen.png"></figure>
</p>

<h2 class="relative group">References and Further Reading
    <div id="references-and-further-reading" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 -start-6 not-prose group-hover:opacity-100 select-none">
        <a class="text-primary-300 dark:text-neutral-700 !no-underline" href="#references-and-further-reading" aria-label="Anchor">#</a>
    </span>
    
</h2>
<ul>
<li>GitHub: <a
  href="https://github.com/vfadlan/avr-exp/tree/main/05-shiftreg"
    target="_blank"
  >vfadlan/avr-exp/05-shiftreg</a></li>
<li><a
  href="https://ww1.microchip.com/downloads/en/DeviceDoc/Atmel-7810-Automotive-Microcontrollers-ATmega328P_Datasheet.pdf"
    target="_blank"
  >ATMega328P Datasheet</a></li>
<li><a
  href="https://www.ti.com/lit/ds/symlink/sn74hc595.pdf"
    target="_blank"
  >SNx4HC595 Datasheet</a></li>
<li>The C Programming Language (2nd Edition) by Brian Kernighan and Dennis Ritchie</li>
<li><a
  href="https://www.ti.com/lit/an/scea117/scea117.pdf"
    target="_blank"
  >TI Application Note: Designing with Shift Registers</a></li>
<li><a
  href="https://circuitcellar.com/resources/quickbits/switch-debouncing/"
    target="_blank"
  >Switch Debouncing, Article from circuitcellar.com</a></li>
<li><a
  href="https://en.wikipedia.org/wiki/7400-series_integrated_circuits"
    target="_blank"
  >7400-Series Integrated Circuit, Article from wikipedia.org</a></li>
</ul>

          
          
          
        </div>
        
        
  <details class="mt-2 mb-5 overflow-hidden rounded-lg ms-0 ps-5">
    
  <summary
    class="py-1 text-lg font-semibold cursor-pointer bg-primary-200 text-neutral-800 -ms-5 ps-5 dark:bg-primary-800 dark:text-neutral-100">
    AVR -
    This article is part of a series.
  </summary>
  
  
    
      <div
        class="py-1 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600">
        <a href="/posts/avr/00-hello/">
          Part 0:
          Hello, Bare Metal AVR.
        </a>
      </div>
    
  
    
      <div
        class="py-1 border-dotted border-neutral-300 border-s-1 -ms-5 ps-5 dark:border-neutral-600">
        Part 1:
        This Article
      </div>
    
  


  </details>


        

        

      </div>

      
      
        
        
          
          
        
        
        
        <script
          type="text/javascript"
          src="/js/page.min.54b6f4371722649edbe871e431d8670d670878c22be8f36e229fe53cc9b786fe25a834def5e6de621f7a3e37b72bc8cd73839aa5ed907ed6cbd45cd3e1b0fa20.js"
          integrity="sha512-VLb0NxciZJ7b6HHkMdhnDWcIeMIr6PNuIp/lPMm3hv4lqDTe9ebeYh96Pje3K8jNc4Oape2QftbL1FzT4bD6IA=="
          data-oid="views_posts/avr/01-shift-register/index.md"
          data-oid-likes="likes_posts/avr/01-shift-register/index.md"></script>
      
    </section>

    
    <footer class="pt-8 max-w-prose print:hidden">
      
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600">
      <div class="flex justify-between pt-3">
        <span class="flex flex-col">
          
            <a
              class="flex text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
              href="/posts/avr/00-hello/">
              <span class="leading-6">
                <span class="inline-block rtl:rotate-180">&larr;</span>&ensp;Hello, Bare Metal AVR.
              </span>
            </a>
            
              <span class="ms-6 mt-1 text-xs text-neutral-500 dark:text-neutral-400">
                <time datetime="2025-12-22T15:24:54&#43;07:00">22 December 2025</time>
              </span>
            
          
        </span>
        <span class="flex flex-col items-end">
          
        </span>
      </div>
    </div>
  


      
    </footer>
  </article>

        


  






<div
  id="scroll-to-top"
  class="fixed bottom-6 end-6 z-50 transform translate-y-4 opacity-0 duration-200">
  <a
    href="#the-top"
    class="pointer-events-auto flex h-12 w-12 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top"
    title="Scroll to top">
    &uarr;
  </a>
</div>

      </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
      
      
        
      
      
      
      
      <nav class="flex flex-row pb-4 text-base font-medium text-neutral-500 dark:text-neutral-400 overflow-x-auto py-2">
        <ul class="flex list-none flex-row">
          
            <li class=" flex mb-1 text-end sm:mb-0 sm:me-7 sm:last:me-0 me-4">
              <a
                class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2 flex items-center"
                href=""
                title="">
                
                
              </a>
            </li>
          
        </ul>
      </nav>
    
  
  <div class="flex items-center justify-between">
    
    
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
          &copy;
          2026
          Fadlan Abduh
      </p>
    

    
    
      <p class="text-xs text-neutral-500 dark:text-neutral-400">
        
        
        Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
          href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
      </p>
    
  </div>
  
    <script>
      mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
        margin: 24,
        background: "rgba(0,0,0,0.5)",
        scrollOffset: 0,
      });
    </script>
  
  
  
  <script
    type="text/javascript"
    src="/js/process.min.ee03488f19c93c2efb199e2e3014ea5f3cb2ce7d45154adb3399a158cac27ca52831db249ede5bb602700ef87eb02434139de0858af1818ab0fb4182472204a4.js"
    integrity="sha512-7gNIjxnJPC77GZ4uMBTqXzyyzn1FFUrbM5mhWMrCfKUoMdsknt5btgJwDvh&#43;sCQ0E53ghYrxgYqw&#43;0GCRyIEpA=="></script>
  
  
</footer>
<div
  id="search-wrapper"
  class="invisible fixed inset-0 flex h-screen w-screen cursor-default flex-col bg-neutral-500/50 p-4 backdrop-blur-sm dark:bg-neutral-900/50 sm:p-6 md:p-[10vh] lg:p-[12vh] z-500"
  data-url="http://localhost:1313/">
  <div
    id="search-modal"
    class="flex flex-col w-full max-w-3xl min-h-0 mx-auto border rounded-md shadow-lg top-20 border-neutral-200 bg-neutral dark:border-neutral-700 dark:bg-neutral-800">
    <header class="relative z-10 flex items-center justify-between flex-none px-2">
      <form class="flex items-center flex-auto min-w-0">
        <div class="flex items-center justify-center w-8 h-8 text-neutral-400">
          <span class="relative block icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="search" class="svg-inline--fa fa-search fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"/></svg>
</span>
        </div>
        <input
          type="search"
          id="search-query"
          class="flex flex-auto h-12 mx-1 bg-transparent appearance-none focus:outline-dotted focus:outline-2 focus:outline-transparent"
          placeholder="Search"
          tabindex="0">
      </form>
      <button
        id="close-search-button"
        class="flex items-center justify-center w-8 h-8 text-neutral-700 hover:text-primary-600 dark:text-neutral dark:hover:text-primary-400"
        title="Close (Esc)">
        <span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M310.6 361.4c12.5 12.5 12.5 32.75 0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3L54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75 0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25l-105.4 105.4L310.6 361.4z"/></svg>
</span>
      </button>
    </header>
    <section class="flex-auto px-2 overflow-auto">
      <ul id="search-results">
        
      </ul>
    </section>
  </div>
</div>

    </div>
  </body>
  
</html>
